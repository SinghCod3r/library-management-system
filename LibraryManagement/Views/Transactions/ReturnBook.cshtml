@model LibraryManagement.Models.Transaction

@{
    ViewData["Title"] = "Return Book";
}

<div class="container mt-4">
    <h1>Return Book</h1>
    <hr />
    
    <div class="row">
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5>Transaction Details</h5>
                </div>
                <div class="card-body">
                    <dl class="row">
                        <dt class="col-sm-4">Book:</dt>
                        <dd class="col-sm-8">@Model.Book.Title</dd>
                        
                        <dt class="col-sm-4">Member:</dt>
                        <dd class="col-sm-8">@Model.Member.Name</dd>
                        
                        <dt class="col-sm-4">Issue Date:</dt>
                        <dd class="col-sm-8">@Model.IssueDate.ToString("yyyy-MM-dd")</dd>
                        
                        <dt class="col-sm-4">Due Date:</dt>
                        <dd class="col-sm-8">@Model.DueDate.ToString("yyyy-MM-dd")</dd>
                        
                        @if (DateTime.Now > Model.DueDate)
                        {
                            <dt class="col-sm-4">Status:</dt>
                            <dd class="col-sm-8"><span class="badge bg-danger">Overdue</span></dd>
                            
                            <dt class="col-sm-4">Days Late:</dt>
                            <dd class="col-sm-8">@((int)(DateTime.Now - Model.DueDate).TotalDays)</dd>
                            
                            <dt class="col-sm-4">Estimated Fine:</dt>
                            <dd class="col-sm-8">$@((int)(DateTime.Now - Model.DueDate).TotalDays * 10.0m)</dd>
                        }
                    </dl>
                </div>
            </div>
            
            <form asp-action="ReturnBook">
                <input type="hidden" asp-for="TransactionId" />
                <div class="form-group">
                    <input type="submit" value="Confirm Return" class="btn btn-primary" />
                    <a asp-action="Index" class="btn btn-secondary">Back to List</a>
                </div>
            </form>
        </div>
    </div>
</div>